{"ast":null,"code":"import React,{useCallback,useEffect,useRef,useState}from\"react\";import OrdersTabel from\"../components/OrdersTabel.js\";import TicketTable from\"../components/TicketTable.js\";import styled from\"styled-components\";import{req}from\"../axiosReqMethods.js\";import{setError}from\"../redux/MessageRedux.js\";import{useDispatch}from\"react-redux\";import AddIcon from\"@mui/icons-material/Add\";import axios from\"axios\";import{Button}from\"@mui/material\";import{Link,useNavigate}from\"react-router-dom\";import Librery from\"./Librery.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n  padding: 1rem 0;\n  min-height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f4f5f7;\n  box-sizing: border-box;\n`;const Wrapper=styled.div`\n  width: 1200px;\n  max-width: 90%;\n`;const Title=styled.h1`\n  font-size: 1.25rem;\n`;const FilterSection=styled.form`\n  max-width: 100%;\n  display: flex;\n  padding: 1.5rem 1rem;\n  background-color: white;\n  box-sizing: border-box;\n  gap: 0.5rem;\n  border-radius: 1vmin;\n\n  justify-content: center;\n\n  @media (max-width: 650px) {\n    flex-direction: column;\n  }\n\n  > * {\n    background-color: #f4f5f7;\n    border: #f4f5f7 1px solid;\n    border-radius: 1vmin;\n    padding: 1rem 0.8rem;\n  }\n\n  > input:focus {\n    background-color: white;\n  }\n  > select:focus {\n    background-color: white;\n  }\n`;const SearchProduct=styled.input`\n  padding: 0.7rem 0.5rem;\n  outline: none;\n  flex: 2;\n`;const Sections=styled.select`\n  flex: 1;\n`;const Options=styled.option``;const Search=styled.button`\n  flex: 1;\n  background-color: teal;\n  color: white;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  :hover {\n    background-color: #02a8a8;\n  }\n`;const LoadMoreBtn=styled.p`\n  margin: 1rem auto;\n  width: max-content;\n  cursor: pointer;\n  :hover {\n    text-decoration: underline;\n    color: teal;\n  }\n`;function Ticket(){const dispatch=useDispatch();const[orders,setOrders]=useState([]);const[page,setPage]=useState(1);const navigator=useNavigate();const[queries,setQueries]=useState();const handleS=(e,_ref)=>{let{type}=_ref;// if (type === \"search\")\n//   setQueries((p) => ({ ...p, [type]: e.target.value }));\nif(type===\"status\")setQueries(p=>({...p,[type]:e.target.value}));if(type===\"sort\")setQueries(p=>({...p,[type]:e.target.value}));};const fetch=async axiosCancelToken=>{try{const{data}=await req.get(`/api/orders/?page=${page}&${new URLSearchParams(queries)}`,{cancelToken:axiosCancelToken.token});setOrders(p=>[...p,...data]);}catch(error){// if(error.response.status === 404) return  dispatch(setError(error.response.data.message))\nif(axios.isCancel(error))return setOrders([]);//req canceled by user\ndispatch(setError(\"failed to fetch orders\"));}};useEffect(()=>{const axiosCancelToken=axios.CancelToken.source();fetch(axiosCancelToken);return()=>axiosCancelToken.cancel();},[page]);const search=async e=>{const axiosCancelToken=axios.CancelToken.source();e.preventDefault();setPage(1);setOrders([]);fetch(axiosCancelToken);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Libraray Amc Orders\"}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(FilterSection,{onSubmit:search,children:/*#__PURE__*/_jsx(Link,{to:\"/Addserviceorder\",className:\"greenbtn\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigator(\"/Addserviceorder\"),className:\"btn\",children:[/*#__PURE__*/_jsx(AddIcon,{}),\"Add Orders\"]})})}),/*#__PURE__*/_jsx(Librery,{})]})]});}export default Ticket;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","OrdersTabel","TicketTable","styled","req","setError","useDispatch","AddIcon","axios","Button","Link","useNavigate","Librery","jsx","_jsx","jsxs","_jsxs","Container","div","Wrapper","Title","h1","FilterSection","form","SearchProduct","input","Sections","select","Options","option","Search","button","LoadMoreBtn","p","Ticket","dispatch","orders","setOrders","page","setPage","navigator","queries","setQueries","handleS","e","_ref","type","target","value","fetch","axiosCancelToken","data","get","URLSearchParams","cancelToken","token","error","isCancel","CancelToken","source","cancel","search","preventDefault","children","onSubmit","to","className","onClick"],"sources":["M:/first-react/panara/admin/src/pages/Ticket.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport OrdersTabel from \"../components/OrdersTabel.js\";\r\nimport TicketTable from \"../components/TicketTable.js\";\r\nimport styled from \"styled-components\";\r\nimport { req } from \"../axiosReqMethods.js\";\r\nimport { setError } from \"../redux/MessageRedux.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"@mui/material\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport Librery from \"./Librery.js\";\r\n\r\nconst Container = styled.div`\r\n  padding: 1rem 0;\r\n  min-height: 100vh;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: #f4f5f7;\r\n  box-sizing: border-box;\r\n`;\r\nconst Wrapper = styled.div`\r\n  width: 1200px;\r\n  max-width: 90%;\r\n`;\r\nconst Title = styled.h1`\r\n  font-size: 1.25rem;\r\n`;\r\nconst FilterSection = styled.form`\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 1.5rem 1rem;\r\n  background-color: white;\r\n  box-sizing: border-box;\r\n  gap: 0.5rem;\r\n  border-radius: 1vmin;\r\n\r\n  justify-content: center;\r\n\r\n  @media (max-width: 650px) {\r\n    flex-direction: column;\r\n  }\r\n\r\n  > * {\r\n    background-color: #f4f5f7;\r\n    border: #f4f5f7 1px solid;\r\n    border-radius: 1vmin;\r\n    padding: 1rem 0.8rem;\r\n  }\r\n\r\n  > input:focus {\r\n    background-color: white;\r\n  }\r\n  > select:focus {\r\n    background-color: white;\r\n  }\r\n`;\r\nconst SearchProduct = styled.input`\r\n  padding: 0.7rem 0.5rem;\r\n  outline: none;\r\n  flex: 2;\r\n`;\r\nconst Sections = styled.select`\r\n  flex: 1;\r\n`;\r\nconst Options = styled.option``;\r\nconst Search = styled.button`\r\n  flex: 1;\r\n  background-color: teal;\r\n  color: white;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  :hover {\r\n    background-color: #02a8a8;\r\n  }\r\n`;\r\nconst LoadMoreBtn = styled.p`\r\n  margin: 1rem auto;\r\n  width: max-content;\r\n  cursor: pointer;\r\n  :hover {\r\n    text-decoration: underline;\r\n    color: teal;\r\n  }\r\n`;\r\n\r\nfunction Ticket() {\r\n  const dispatch = useDispatch();\r\n  const [orders, setOrders] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n  const navigator = useNavigate()\r\n  const [queries, setQueries] = useState();\r\n  const handleS = (e, { type }) => {\r\n    // if (type === \"search\")\r\n    //   setQueries((p) => ({ ...p, [type]: e.target.value }));\r\n    if (type === \"status\")\r\n      setQueries((p) => ({ ...p, [type]: e.target.value }));\r\n    if (type === \"sort\") setQueries((p) => ({ ...p, [type]: e.target.value }));\r\n  };\r\n\r\n  const fetch = async (axiosCancelToken) => {\r\n    try {\r\n      const { data } = await req.get(\r\n        `/api/orders/?page=${page}&${new URLSearchParams(queries)}`,\r\n        { cancelToken: axiosCancelToken.token }\r\n      );\r\n      setOrders((p) => [...p, ...data]);\r\n    } catch (error) {\r\n      // if(error.response.status === 404) return  dispatch(setError(error.response.data.message))\r\n      if (axios.isCancel(error)) return setOrders([]); //req canceled by user\r\n      dispatch(setError(\"failed to fetch orders\"));\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const axiosCancelToken = axios.CancelToken.source();\r\n    fetch(axiosCancelToken);\r\n    return () => axiosCancelToken.cancel();\r\n  }, [page]);\r\n\r\n  const search = async (e) => {\r\n    const axiosCancelToken = axios.CancelToken.source();\r\n    e.preventDefault();\r\n    setPage(1);\r\n    setOrders([]);\r\n    fetch(axiosCancelToken);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Title>Libraray Amc Orders</Title>\r\n      <Wrapper>\r\n        <FilterSection onSubmit={search}>\r\n          <Link to=\"/Addserviceorder\" className=\"greenbtn\">\r\n            <button\r\n              onClick={() => navigator(\"/Addserviceorder\")}\r\n              className=\"btn\"\r\n            >\r\n              <AddIcon />\r\n              Add Orders\r\n            </button>\r\n          </Link>\r\n        </FilterSection>\r\n        <Librery></Librery>\r\n      </Wrapper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Ticket;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}