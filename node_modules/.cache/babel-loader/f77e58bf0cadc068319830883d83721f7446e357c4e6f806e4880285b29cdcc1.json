{"ast":null,"code":"import React,{useCallback,useEffect,useRef,useState}from\"react\";import OrdersTabel from\"../components/OrdersTabel.js\";import ComplainTable from\"../components/ComplainTable.js\";import styled from\"styled-components\";import{req}from\"../axiosReqMethods.js\";import{setError}from\"../redux/MessageRedux.js\";import{useDispatch}from\"react-redux\";import AddIcon from\"@mui/icons-material/Add\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n  padding: 1rem 0;\n  min-height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f4f5f7;\n  box-sizing: border-box;\n`;const Wrapper=styled.div`\n  width: 1200px;\n  max-width: 90%;\n`;const Title=styled.h1`\n  font-size: 1.25rem;\n`;const FilterSection=styled.form`\n  max-width: 100%;\n  display: flex;\n  padding: 1.5rem 1rem;\n  background-color: white;\n  box-sizing: border-box;\n  gap: 0.5rem;\n  border-radius: 1vmin;\n\n  @media (max-width: 650px) {\n    flex-direction: column;\n  }\n\n  > * {\n    background-color: #f4f5f7;\n    border: #f4f5f7 1px solid;\n    border-radius: 1vmin;\n    padding: 1rem 0.8rem;\n  }\n\n  > input:focus {\n    background-color: white;\n  }\n  > select:focus {\n    background-color: white;\n  }\n`;const SearchProduct=styled.input`\n  padding: 0.7rem 0.5rem;\n  outline: none;\n  flex: 2;\n`;const Sections=styled.select`\n  flex: 1;\n`;const Options=styled.option``;const Search=styled.button`\n  flex: 1;\n  background-color: teal;\n  color: white;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  :hover {\n    background-color: #02a8a8;\n  }\n`;const LoadMoreBtn=styled.p`\n  margin: 1rem auto;\n  width: max-content;\n  cursor: pointer;\n  :hover {\n    text-decoration: underline;\n    color: teal;\n  }\n`;function AllComplains(){const dispatch=useDispatch();const[orders,setOrders]=useState([]);const[page,setPage]=useState(1);const[queries,setQueries]=useState();const handleS=(e,_ref)=>{let{type}=_ref;if(type===\"search\")setQueries(p=>({...p,[type]:e.target.value}));if(type===\"status\")setQueries(p=>({...p,[type]:e.target.value}));if(type===\"sort\")setQueries(p=>({...p,[type]:e.target.value}));};const fetch=async()=>{try{const res=await req.get(`/api/complain/`);setOrders(res.data);console.log(res.data);console.log(orders);}catch(error){// if(error.response.status === 404) return  dispatch(setError(error.response.data.message))\nif(axios.isCancel(error))return setOrders([]);//req canceled by user\ndispatch(setError(\"failed to fetch orders\"));}};useEffect(()=>{const axiosCancelToken=axios.CancelToken.source();fetch(axiosCancelToken);return()=>axiosCancelToken.cancel();},[page]);const search=async e=>{const axiosCancelToken=axios.CancelToken.source();e.preventDefault();setPage(1);setOrders([]);fetch(axiosCancelToken);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Complains\"}),/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsx(ComplainTable,{orders:orders,setOrders:setOrders})})]});}export default AllComplains;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","OrdersTabel","ComplainTable","styled","req","setError","useDispatch","AddIcon","axios","jsx","_jsx","jsxs","_jsxs","Container","div","Wrapper","Title","h1","FilterSection","form","SearchProduct","input","Sections","select","Options","option","Search","button","LoadMoreBtn","p","AllComplains","dispatch","orders","setOrders","page","setPage","queries","setQueries","handleS","e","_ref","type","target","value","fetch","res","get","data","console","log","error","isCancel","axiosCancelToken","CancelToken","source","cancel","search","preventDefault","children"],"sources":["M:/first-react/panara/admin/src/pages/AllComplains.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport OrdersTabel from \"../components/OrdersTabel.js\";\r\nimport ComplainTable from \"../components/ComplainTable.js\";\r\nimport styled from \"styled-components\";\r\nimport { req } from \"../axiosReqMethods.js\";\r\nimport { setError } from \"../redux/MessageRedux.js\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport AddIcon from \"@mui/icons-material/Add\";\r\nimport axios from \"axios\";\r\n\r\nconst Container = styled.div`\r\n  padding: 1rem 0;\r\n  min-height: 100vh;\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: #f4f5f7;\r\n  box-sizing: border-box;\r\n`;\r\nconst Wrapper = styled.div`\r\n  width: 1200px;\r\n  max-width: 90%;\r\n`;\r\nconst Title = styled.h1`\r\n  font-size: 1.25rem;\r\n`;\r\nconst FilterSection = styled.form`\r\n  max-width: 100%;\r\n  display: flex;\r\n  padding: 1.5rem 1rem;\r\n  background-color: white;\r\n  box-sizing: border-box;\r\n  gap: 0.5rem;\r\n  border-radius: 1vmin;\r\n\r\n  @media (max-width: 650px) {\r\n    flex-direction: column;\r\n  }\r\n\r\n  > * {\r\n    background-color: #f4f5f7;\r\n    border: #f4f5f7 1px solid;\r\n    border-radius: 1vmin;\r\n    padding: 1rem 0.8rem;\r\n  }\r\n\r\n  > input:focus {\r\n    background-color: white;\r\n  }\r\n  > select:focus {\r\n    background-color: white;\r\n  }\r\n`;\r\nconst SearchProduct = styled.input`\r\n  padding: 0.7rem 0.5rem;\r\n  outline: none;\r\n  flex: 2;\r\n`;\r\nconst Sections = styled.select`\r\n  flex: 1;\r\n`;\r\nconst Options = styled.option``;\r\nconst Search = styled.button`\r\n  flex: 1;\r\n  background-color: teal;\r\n  color: white;\r\n  font-weight: 600;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  :hover {\r\n    background-color: #02a8a8;\r\n  }\r\n`;\r\nconst LoadMoreBtn = styled.p`\r\n  margin: 1rem auto;\r\n  width: max-content;\r\n  cursor: pointer;\r\n  :hover {\r\n    text-decoration: underline;\r\n    color: teal;\r\n  }\r\n`;\r\n\r\nfunction AllComplains() {\r\n  const dispatch = useDispatch();\r\n  const [orders, setOrders] = useState([]);\r\n  const [page, setPage] = useState(1);\r\n\r\n  const [queries, setQueries] = useState();\r\n  const handleS = (e, { type }) => {\r\n    if (type === \"search\")\r\n      setQueries((p) => ({ ...p, [type]: e.target.value }));\r\n    if (type === \"status\")\r\n      setQueries((p) => ({ ...p, [type]: e.target.value }));\r\n    if (type === \"sort\") setQueries((p) => ({ ...p, [type]: e.target.value }));\r\n  };\r\n\r\n  const fetch = async () => {\r\n    try {\r\n      const  res  = await req.get(\r\n        `/api/complain/`\r\n      );\r\n        setOrders(res.data);\r\n        console.log(res.data);\r\n        console.log(orders);\r\n        \r\n    } catch (error) {\r\n      // if(error.response.status === 404) return  dispatch(setError(error.response.data.message))\r\n      if (axios.isCancel(error)) return setOrders([]); //req canceled by user\r\n      dispatch(setError(\"failed to fetch orders\"));\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    const axiosCancelToken = axios.CancelToken.source();\r\n    fetch(axiosCancelToken);\r\n    return () => axiosCancelToken.cancel();\r\n  }, [page]);\r\n\r\n  const search = async (e) => {\r\n    const axiosCancelToken = axios.CancelToken.source();\r\n    e.preventDefault();\r\n    setPage(1);\r\n    setOrders([]);\r\n    fetch(axiosCancelToken);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Title>Complains</Title>\r\n      <Wrapper>\r\n        <ComplainTable orders={orders} setOrders={setOrders} />\r\n      </Wrapper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default AllComplains;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}