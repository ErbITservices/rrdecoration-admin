{"ast":null,"code":"import React,{useCallback,useEffect,useRef,useState}from'react';import OrdersTabel from'../components/OrdersTabel.js';import styled from'styled-components';import{req}from'../axiosReqMethods.js';import{setError}from'../redux/MessageRedux.js';import{useDispatch}from'react-redux';import AddIcon from'@mui/icons-material/Add';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n    padding: 1rem 0;\n    min-height: 100vh;\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    background-color: #F4F5F7;\n    box-sizing: border-box;\n`;const Wrapper=styled.div`\n    width: 1200px;\n    max-width: 90%;\n`;const Title=styled.h1`\n    font-size: 1.25rem;\n`;const FilterSection=styled.form`\n    max-width: 100%;\n    display: flex;\n    padding: 1.5rem 1rem;\n    background-color: white;\n    box-sizing: border-box;\n    gap: 0.5rem;\n    border-radius: 1vmin;\n\n    @media (max-width: 650px) {\n        flex-direction: column;\n    }\n\n    > * {\n        background-color: #F4F5F7;\n        border: #F4F5F7 1px solid;\n        border-radius: 1vmin;\n        padding: 1rem 0.8rem; \n    }\n\n    > input:focus {\n        background-color: white;\n    }\n    > select:focus {\n        background-color: white;\n    }\n`;const SearchProduct=styled.input`\n    padding: 0.7rem 0.5rem;\n    outline: none;\n    flex: 2;   \n`;const Sections=styled.select`\n    flex: 1;\n`;const Options=styled.option`\n\n`;const Search=styled.button`\n    flex: 1;\n    background-color: teal;\n    color: white;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.5rem; \n    :hover {\n        background-color: #02a8a8;\n    }\n`;const LoadMoreBtn=styled.p`\n    margin: 1rem auto;\n    width: max-content;\n    cursor: pointer;\n    :hover {\n        text-decoration: underline;\n        color: teal;\n    }\n`;function Orders(){const dispatch=useDispatch();const[orders,setOrders]=useState([]);const[page,setPage]=useState(1);const[queries,setQueries]=useState();const handleS=(e,_ref)=>{let{type}=_ref;if(type===\"search\")setQueries(p=>({...p,[type]:e.target.value}));if(type===\"status\")setQueries(p=>({...p,[type]:e.target.value}));if(type===\"sort\")setQueries(p=>({...p,[type]:e.target.value}));};const fetch=async axiosCancelToken=>{try{const{data}=await req.get(`/api/orders/?page=${page}&${new URLSearchParams(queries)}`,{cancelToken:axiosCancelToken.token});setOrders(p=>[...p,...data]);}catch(error){// if(error.response.status === 404) return  dispatch(setError(error.response.data.message))\nif(axios.isCancel(error))return setOrders([]);//req canceled by user\ndispatch(setError(\"failed to fetch orders\"));}};useEffect(()=>{const axiosCancelToken=axios.CancelToken.source();fetch(axiosCancelToken);return()=>axiosCancelToken.cancel();},[page]);const search=async e=>{const axiosCancelToken=axios.CancelToken.source();e.preventDefault();setPage(1);setOrders([]);fetch(axiosCancelToken);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Products\"}),/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsxs(FilterSection,{onSubmit:search,children:[/*#__PURE__*/_jsx(SearchProduct,{type:\"tel\",placeholder:\"Search by customer number\",onChange:e=>handleS(e,{type:\"search\"})}),/*#__PURE__*/_jsxs(Sections,{onChange:e=>handleS(e,{type:\"status\"}),children:[/*#__PURE__*/_jsx(Options,{hidden:true,children:\"Status\"}),/*#__PURE__*/_jsx(Options,{value:\"pending\",children:\"Pending\"}),/*#__PURE__*/_jsx(Options,{value:\"processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(Options,{value:\"delivered\",children:\"Delivered\"}),/*#__PURE__*/_jsx(Options,{value:\"\",children:\"All\"})]}),/*#__PURE__*/_jsxs(Sections,{onChange:e=>handleS(e,{type:\"sort\"}),children:[/*#__PURE__*/_jsx(Options,{value:\"\",hidden:true,children:\"Sort\"}),/*#__PURE__*/_jsx(Options,{value:\"price-asc\",children:\"Price Low to high\"}),/*#__PURE__*/_jsx(Options,{value:\"price-desc\",children:\"Price High to low\"}),/*#__PURE__*/_jsx(Options,{value:\"newest\",children:\"New Orders\"}),/*#__PURE__*/_jsx(Options,{value:\"oldest\",children:\"Old Orders (default)\"})]}),/*#__PURE__*/_jsxs(Search,{children:[/*#__PURE__*/_jsx(AddIcon,{}),\"Search\"]})]}),/*#__PURE__*/_jsx(OrdersTabel,{orders:orders,setOrders:setOrders}),/*#__PURE__*/_jsx(LoadMoreBtn,{onClick:()=>setPage(p=>p+1),children:\"Load more\"})]})]});}export default Orders;","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","OrdersTabel","styled","req","setError","useDispatch","AddIcon","axios","jsx","_jsx","jsxs","_jsxs","Container","div","Wrapper","Title","h1","FilterSection","form","SearchProduct","input","Sections","select","Options","option","Search","button","LoadMoreBtn","p","Orders","dispatch","orders","setOrders","page","setPage","queries","setQueries","handleS","e","_ref","type","target","value","fetch","axiosCancelToken","data","get","URLSearchParams","cancelToken","token","error","isCancel","CancelToken","source","cancel","search","preventDefault","children","onSubmit","placeholder","onChange","hidden","onClick"],"sources":["M:/first-react/panara/admin/src/pages/Orders.js"],"sourcesContent":["import React, { useCallback, useEffect , useRef, useState} from 'react'\r\nimport OrdersTabel from '../components/OrdersTabel.js'\r\nimport styled from 'styled-components'\r\nimport { req } from '../axiosReqMethods.js'\r\nimport { setError } from '../redux/MessageRedux.js'\r\nimport { useDispatch } from 'react-redux'\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport axios from 'axios'\r\n\r\n\r\n\r\n\r\nconst Container = styled.div`\r\n    padding: 1rem 0;\r\n    min-height: 100vh;\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    background-color: #F4F5F7;\r\n    box-sizing: border-box;\r\n`\r\nconst Wrapper = styled.div`\r\n    width: 1200px;\r\n    max-width: 90%;\r\n`\r\nconst Title = styled.h1`\r\n    font-size: 1.25rem;\r\n`\r\nconst FilterSection = styled.form`\r\n    max-width: 100%;\r\n    display: flex;\r\n    padding: 1.5rem 1rem;\r\n    background-color: white;\r\n    box-sizing: border-box;\r\n    gap: 0.5rem;\r\n    border-radius: 1vmin;\r\n\r\n    @media (max-width: 650px) {\r\n        flex-direction: column;\r\n    }\r\n\r\n    > * {\r\n        background-color: #F4F5F7;\r\n        border: #F4F5F7 1px solid;\r\n        border-radius: 1vmin;\r\n        padding: 1rem 0.8rem; \r\n    }\r\n\r\n    > input:focus {\r\n        background-color: white;\r\n    }\r\n    > select:focus {\r\n        background-color: white;\r\n    }\r\n`\r\nconst SearchProduct = styled.input`\r\n    padding: 0.7rem 0.5rem;\r\n    outline: none;\r\n    flex: 2;   \r\n`\r\nconst Sections = styled.select`\r\n    flex: 1;\r\n`\r\nconst Options = styled.option`\r\n\r\n`\r\nconst Search = styled.button`\r\n    flex: 1;\r\n    background-color: teal;\r\n    color: white;\r\n    font-weight: 600;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 0.5rem; \r\n    :hover {\r\n        background-color: #02a8a8;\r\n    }\r\n`\r\nconst LoadMoreBtn = styled.p`\r\n    margin: 1rem auto;\r\n    width: max-content;\r\n    cursor: pointer;\r\n    :hover {\r\n        text-decoration: underline;\r\n        color: teal;\r\n    }\r\n`\r\n\r\n \r\nfunction Orders() {\r\n    \r\n    const dispatch = useDispatch()\r\n    const [orders, setOrders] = useState([])\r\n    const [page, setPage] = useState(1)\r\n\r\n    const [queries, setQueries] = useState()\r\n    const handleS = (e, {type}) => {\r\n        if(type === \"search\") setQueries(p => ({...p, [type]: e.target.value}))\r\n        if(type === \"status\") setQueries(p => ({...p, [type]: e.target.value}))\r\n        if(type === \"sort\") setQueries(p => ({...p, [type]: e.target.value}))\r\n    } \r\n\r\n     \r\n    const fetch = async (axiosCancelToken) => {\r\n        try {\r\n            const {data} = await req.get(`/api/orders/?page=${page}&${new URLSearchParams(queries)}`, {cancelToken: axiosCancelToken.token})\r\n            setOrders(p => [...p, ...data])\r\n        } catch (error) {\r\n            // if(error.response.status === 404) return  dispatch(setError(error.response.data.message))\r\n            if(axios.isCancel(error)) return setOrders([]) //req canceled by user\r\n            dispatch(setError(\"failed to fetch orders\"))\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        const axiosCancelToken = axios.CancelToken.source()  \r\n        fetch(axiosCancelToken)\r\n        return () => axiosCancelToken.cancel()\r\n    }, [page])\r\n\r\n    const search = async (e) => {\r\n        const axiosCancelToken = axios.CancelToken.source()  \r\n        e.preventDefault()\r\n        setPage(1)\r\n        setOrders([])\r\n        fetch(axiosCancelToken)\r\n    }\r\n\r\n  return (\r\n<Container>\r\n        <Title>Products</Title>\r\n        <Wrapper>\r\n            \r\n            <FilterSection onSubmit={search}>\r\n                <SearchProduct type=\"tel\" placeholder='Search by customer number' onChange={(e) => handleS(e, {type: \"search\"})}></SearchProduct>\r\n                <Sections onChange={(e) => handleS(e, {type: \"status\"})}>\r\n                    <Options hidden>Status</Options>\r\n                    <Options value=\"pending\">Pending</Options>\r\n                    <Options value=\"processing\">Processing</Options>\r\n                    <Options value=\"delivered\">Delivered</Options>\r\n                    <Options value=\"\" >All</Options>\r\n                </Sections>\r\n                <Sections onChange={(e) => handleS(e, {type: \"sort\"})}>\r\n                    <Options value=\"\" hidden>Sort</Options>\r\n                    <Options value=\"price-asc\">Price Low to high</Options>\r\n                    <Options value=\"price-desc\">Price High to low</Options>\r\n                    <Options value=\"newest\">New Orders</Options>\r\n                    <Options value=\"oldest\">Old Orders (default)</Options>\r\n                </Sections>\r\n                <Search><AddIcon/>Search</Search>\r\n            </FilterSection>\r\n            <OrdersTabel orders={orders} setOrders={setOrders} />\r\n            <LoadMoreBtn onClick={() => setPage(p => p+1)}>Load more</LoadMoreBtn>\r\n        </Wrapper>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Orders\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}