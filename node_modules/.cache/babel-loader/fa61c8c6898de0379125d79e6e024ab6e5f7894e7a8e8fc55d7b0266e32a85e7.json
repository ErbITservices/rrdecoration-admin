{"ast":null,"code":"import{useState,useEffect}from'react';import EditModal from'./EditModal';import styled from'styled-components';import{req}from'../axiosReqMethods';import{setError}from'../redux/MessageRedux';import{useDispatch}from'react-redux';import{addannouncements,editAnnoucment}from'../redux/AnnoucmentRedux';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n  margin: 1rem 0;\n  display: grid;\n  gap: 1rem;\n  @media (max-width: 800px) { //added this bza left side was overflowing\n    margin-left: 1em;\n  }\n`;const Section=styled.div`\n  display: flex;\n\n  @media (max-width: 800px) {\n    flex-direction: column;\n    gap: 0.5rem;\n  }\n`;const Left=styled.div`\n  flex: 1;\n\n`;const Right=styled.div`\n  flex: 2;\n\n  > input, select {\n    box-sizing: border-box;\n    width: 100%;\n    padding: 0.9rem 0.5rem;\n    background-color: #F4F5F7;\n    border: 1px rgb(229,231,235) solid;\n    border-radius: 1vmin;\n    font-size: 1.1rem;\n    outline: none;\n\n    :focus  {\n      background-color: white;\n    }\n  }\n`;const Textarea=styled.textarea`\n    box-sizing: border-box;\n    width: 100%;\n    height: 500px;\n    resize: vertical;\n    padding: 0.9rem 0.5rem;\n    background-color: #F4F5F7;\n    border: 1px rgb(229,231,235) solid;\n    border-radius: 1vmin;\n    font-size: 1.1rem;\n    outline-color: lightblue;\n`;function EditAnnouncments(_ref){let{isOpen,setIsOpen,EditAnnouncmentsInfo,title,desc}=_ref;const dispatch=useDispatch();const DefaultValues={title:\"\",active:false};const[annoucment,setAnnoucment]=useState(DefaultValues);useEffect(()=>{if(!EditAnnouncmentsInfo)return;setAnnoucment({...EditAnnouncmentsInfo});},[EditAnnouncmentsInfo]);const handleChange=e=>{const name=e.target.name;let value=e.target.value;if(name===\"active\")value=JSON.parse(value);// parsivg value to json because this is coming like \"true\" and i want true thats why parsed it to JSON\nsetAnnoucment(p=>({...p,[name]:value}));};const editAnnouncmentApi=async()=>{try{const{data}=await req.put(`/api/announcment/${annoucment._id}`,{title:annoucment.title,active:annoucment.active});dispatch(setError(data===null||data===void 0?void 0:data.message));dispatch(editAnnoucment(annoucment));}catch(error){dispatch(setError(error.responce.data.message));}};const addAnnouncmentApi=async()=>{try{const{data}=await req.post(\"/api/announcment\",annoucment);dispatch(setError(data===null||data===void 0?void 0:data.message));dispatch(addannouncements(annoucment));}catch(error){dispatch(setError(error.responce.data.message));}};const handleSubmit=()=>{if(!EditAnnouncmentsInfo){addAnnouncmentApi();}else{editAnnouncmentApi();}setIsOpen(false);};return/*#__PURE__*/_jsx(EditModal,{isOpen:isOpen,setIsOpen:setIsOpen,action:handleSubmit,title:title,desc:desc,children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(Section,{children:[/*#__PURE__*/_jsx(Left,{children:/*#__PURE__*/_jsx(\"label\",{children:\"Product Description\"})}),/*#__PURE__*/_jsx(Right,{children:/*#__PURE__*/_jsx(Textarea,{name:\"title\",value:annoucment.title,onChange:e=>handleChange(e)})})]}),/*#__PURE__*/_jsxs(Section,{children:[/*#__PURE__*/_jsx(Left,{children:/*#__PURE__*/_jsx(\"label\",{children:\"is activated\"})}),/*#__PURE__*/_jsx(Right,{children:/*#__PURE__*/_jsxs(\"select\",{name:\"active\",value:annoucment.active,onChange:e=>handleChange(e),children:[/*#__PURE__*/_jsx(\"option\",{value:false,children:\"false\"}),/*#__PURE__*/_jsx(\"option\",{value:true,children:\"true\"})]})})]})]})});}export default EditAnnouncments;","map":{"version":3,"names":["useState","useEffect","EditModal","styled","req","setError","useDispatch","addannouncements","editAnnoucment","jsx","_jsx","jsxs","_jsxs","Container","div","Section","Left","Right","Textarea","textarea","EditAnnouncments","_ref","isOpen","setIsOpen","EditAnnouncmentsInfo","title","desc","dispatch","DefaultValues","active","annoucment","setAnnoucment","handleChange","e","name","target","value","JSON","parse","p","editAnnouncmentApi","data","put","_id","message","error","responce","addAnnouncmentApi","post","handleSubmit","action","children","onChange"],"sources":["M:/first-react/panara/admin/src/components/EditAnnouncments.js"],"sourcesContent":["import {useState, useEffect} from 'react'\r\nimport EditModal from './EditModal'\r\nimport styled from 'styled-components'\r\nimport { req } from '../axiosReqMethods'\r\nimport { setError } from '../redux/MessageRedux'\r\nimport { useDispatch } from 'react-redux'\r\nimport { addannouncements, editAnnoucment } from '../redux/AnnoucmentRedux'\r\n\r\n\r\nconst Container = styled.div`\r\n  margin: 1rem 0;\r\n  display: grid;\r\n  gap: 1rem;\r\n  @media (max-width: 800px) { //added this bza left side was overflowing\r\n    margin-left: 1em;\r\n  }\r\n`\r\nconst Section = styled.div`\r\n  display: flex;\r\n\r\n  @media (max-width: 800px) {\r\n    flex-direction: column;\r\n    gap: 0.5rem;\r\n  }\r\n`\r\nconst Left = styled.div`\r\n  flex: 1;\r\n\r\n`\r\nconst Right = styled.div`\r\n  flex: 2;\r\n\r\n  > input, select {\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    padding: 0.9rem 0.5rem;\r\n    background-color: #F4F5F7;\r\n    border: 1px rgb(229,231,235) solid;\r\n    border-radius: 1vmin;\r\n    font-size: 1.1rem;\r\n    outline: none;\r\n\r\n    :focus  {\r\n      background-color: white;\r\n    }\r\n  }\r\n`\r\n\r\nconst Textarea = styled.textarea`\r\n    box-sizing: border-box;\r\n    width: 100%;\r\n    height: 500px;\r\n    resize: vertical;\r\n    padding: 0.9rem 0.5rem;\r\n    background-color: #F4F5F7;\r\n    border: 1px rgb(229,231,235) solid;\r\n    border-radius: 1vmin;\r\n    font-size: 1.1rem;\r\n    outline-color: lightblue;\r\n`\r\n\r\n\r\nfunction EditAnnouncments({isOpen, setIsOpen, EditAnnouncmentsInfo, title, desc}) {\r\n  const dispatch = useDispatch()\r\n  const DefaultValues = {title:\"\", active: false}\r\n\r\n  const [annoucment, setAnnoucment] = useState(DefaultValues)\r\n\r\n  useEffect(() => {\r\n    if(!EditAnnouncmentsInfo)  return\r\n    setAnnoucment({...EditAnnouncmentsInfo}) \r\n  }, [EditAnnouncmentsInfo])\r\n\r\n  const handleChange = (e) => {\r\n    const name = e.target.name;\r\n    let value = e.target.value;\r\n    if (name === \"active\") value = JSON.parse(value) // parsivg value to json because this is coming like \"true\" and i want true thats why parsed it to JSON\r\n    setAnnoucment(p => ({...p, [name]: value}))\r\n  }\r\n\r\n  const editAnnouncmentApi = async () => {\r\n    try {\r\n      const {data} = await req.put(`/api/announcment/${annoucment._id}`, {title: annoucment.title, active: annoucment.active})\r\n      dispatch(setError(data?.message))\r\n      dispatch(editAnnoucment(annoucment))\r\n    } catch (error) {\r\n      dispatch(setError(error.responce.data.message))\r\n    }\r\n    \r\n  }\r\n  const addAnnouncmentApi = async () => {\r\n    try {\r\n      const {data} = await req.post(\"/api/announcment\", annoucment)\r\n      dispatch(setError(data?.message))\r\n      dispatch(addannouncements(annoucment))\r\n    } catch (error) {\r\n      dispatch(setError(error.responce.data.message))\r\n    }\r\n    \r\n  }\r\n  \r\n  const handleSubmit = () => {\r\n    if(!EditAnnouncmentsInfo){\r\n      addAnnouncmentApi()\r\n    } else {\r\n      editAnnouncmentApi()\r\n    }\r\n    setIsOpen(false)\r\n  }\r\n\r\n  return (\r\n    <EditModal isOpen={isOpen} setIsOpen={setIsOpen} action={handleSubmit} title={title} desc={desc}>\r\n        <Container>\r\n            <Section>\r\n                <Left><label>Product Description</label></Left>\r\n                <Right><Textarea name=\"title\" value={annoucment.title} onChange={e => handleChange(e)}/></Right>\r\n            </Section>\r\n\r\n            <Section>\r\n                <Left><label>is activated</label></Left>\r\n                <Right>\r\n                <select name=\"active\" value={annoucment.active} onChange={e => handleChange(e)}>\r\n                    <option value={false}>false</option>\r\n                    <option value={true}>true</option>\r\n                </select>\r\n                </Right>\r\n            </Section>\r\n          \r\n        </Container>\r\n    </EditModal>\r\n  )\r\n}\r\n\r\nexport default EditAnnouncments"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}